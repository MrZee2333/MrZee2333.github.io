<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ™ºèƒ½è¿åŠ¨å¥åº·å¹³å°</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        body {
            font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
            background: linear-gradient(135deg, #e0f2fe 0%, #fff7ed 100%);
            min-height: 100vh;
            padding: 20px;
        }
        .container {
            max-width: 1200px;
            margin: 0 auto;
        }
        h1 {
            text-align: center;
            font-size: 2rem;
            color: #1f2937;
            margin-bottom: 2rem;
        }
        .card-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px;
            margin-bottom: 2rem;
        }
        .card {
            background: white;
            border-radius: 12px;
            padding: 20px;
            box-shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            transition: transform 0.2s;
        }
        .card:hover {
            transform: translateY(-5px);
        }
        .card-blue {
            background: linear-gradient(135deg, #3b82f6, #2563eb);
            color: white;
        }
        .card-orange {
            background: linear-gradient(135deg, #f97316, #ea580c);
            color: white;
        }
        .card-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 1rem;
        }
        .card-title {
            font-size: 1.5rem;
            font-weight: 600;
        }
        .exercise-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 15px;
            margin: 1rem 0;
        }
        .exercise-btn {
            background: white;
            border: none;
            border-radius: 8px;
            padding: 15px;
            text-align: center;
            cursor: pointer;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
        }
        .exercise-btn:hover {
            background: #f3f4f6;
        }
        .exercise-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }
        .form-group {
            margin-bottom: 1rem;
        }
        .form-group label {
            display: block;
            margin-bottom: 0.5rem;
            color: #4b5563;
        }
        .form-control {
            width: 100%;
            padding: 0.5rem;
            border: 1px solid #d1d5db;
            border-radius: 6px;
            font-size: 1rem;
        }
        .drink-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 15px;
        }
        .drink-card {
            background: white;
            border-radius: 8px;
            padding: 15px;
            border: 1px solid #e5e7eb;
        }
        .drink-icon {
            font-size: 2rem;
            margin-bottom: 0.5rem;
        }
        .drink-info {
            color: #6b7280;
            font-size: 0.875rem;
            margin-top: 0.5rem;
        }
        .exercise-detail {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }
        .exercise-detail.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .detail-content {
            background: white;
            border-radius: 12px;
            padding: 20px;
            width: 90%;
            max-width: 600px;
            max-height: 90vh;
            overflow-y: auto;
        }
        .close-btn {
            position: absolute;
            top: 20px;
            right: 20px;
            background: white;
            border: none;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            font-size: 1.5rem;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .result-card {
            background: #f3f4f6;
            border-radius: 8px;
            padding: 15px;
            margin-top: 1rem;
        }
        .result-item {
            display: flex;
            justify-content: space-between;
            margin-bottom: 0.5rem;
        }
        .header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 2rem;
        }
        .user-info {
            display: flex;
            align-items: center;
            gap: 1rem;
        }
        .avatar {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            cursor: pointer;
            object-fit: cover;
        }
        .login-btn {
            background: #3b82f6;
            color: white;
            border: none;
            padding: 0.5rem 1rem;
            border-radius: 6px;
            cursor: pointer;
        }
        .login-modal {
            display: none;
            position: fixed;
            top: 0;
            left: 0;
            right: 0;
            bottom: 0;
            background: rgba(0, 0, 0, 0.5);
            z-index: 1000;
        }
        .login-modal.active {
            display: flex;
            align-items: center;
            justify-content: center;
        }
        .login-content {
            background: white;
            padding: 2rem;
            border-radius: 12px;
            width: 90%;
            max-width: 400px;
        }
        .avatar-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin: 1rem 0;
        }
        .avatar-option {
            width: 60px;
            height: 60px;
            border-radius: 50%;
            cursor: pointer;
            border: 2px solid transparent;
            transition: border-color 0.2s;
        }
        .avatar-option.selected {
            border-color: #3b82f6;
        }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>æ™ºèƒ½è¿åŠ¨å¥åº·å¹³å°</h1>
            <div class="user-info">
                <img id="userAvatar" src="https://api.dicebear.com/7.x/avataaars/svg?seed=default" alt="ç”¨æˆ·å¤´åƒ" class="avatar" onclick="showLoginModal()">
                <span id="userName">æœªç™»å½•</span>
                <button class="login-btn" onclick="showLoginModal()">ç™»å½•</button>
            </div>
        </div>

        <!-- ç™»å½•å¼¹çª— -->
        <div id="loginModal" class="login-modal">
            <div class="login-content">
                <h2 class="card-title mb-4" id="loginTitle">ç”¨æˆ·ç™»å½•</h2>
                <div class="form-group">
                    <label>ç”¨æˆ·å</label>
                    <input type="text" id="loginUsername" class="form-control" placeholder="è¯·è¾“å…¥ç”¨æˆ·å">
                </div>
                <div class="form-group">
                    <label>å¯†ç </label>
                    <input type="password" id="loginPassword" class="form-control" placeholder="è¯·è¾“å…¥å¯†ç ">
                </div>
                <div class="form-group" id="avatarSelectGroup" style="display:none;">
                    <label>é€‰æ‹©å¤´åƒ</label>
                    <div class="avatar-grid" id="avatarGrid">
                        <!-- å¤´åƒé€‰é¡¹å°†é€šè¿‡JavaScriptåŠ¨æ€ç”Ÿæˆ -->
                    </div>
                </div>
                <div class="form-group" id="registerWeightGroup" style="display:none;">
                    <label>ä½“é‡ (kg)</label>
                    <input type="number" id="registerWeight" class="form-control" placeholder="è¯·è¾“å…¥ä½“é‡" min="0" step="0.1">
                </div>
                <div class="form-group" id="registerAgeGroup" style="display:none;">
                    <label>å¹´é¾„</label>
                    <input type="number" id="registerAge" class="form-control" placeholder="è¯·è¾“å…¥å¹´é¾„" min="0" max="120">
                </div>
                <button onclick="submitLoginOrRegister()" class="form-control" style="background: #3b82f6; color: white; border: none; cursor: pointer; margin-top: 1rem;" id="loginSubmitBtn">
                    ç™»å½•
                </button>
                <div style="text-align:center; margin-top:1rem;">
                    <span id="toggleLoginRegister" style="color:#3b82f6; cursor:pointer;">æ²¡æœ‰è´¦å·ï¼Ÿæ³¨å†Œ</span>
                </div>
            </div>
        </div>

        <!-- ä¸»è¦åŠŸèƒ½å¡ç‰‡ -->
        <div class="card-grid">
            <div class="card card-blue">
                <div class="card-header">
                    <h2 class="card-title">è¿åŠ¨è®°å½•</h2>
                </div>
                <p>è®°å½•æ‚¨çš„è¿åŠ¨æ•°æ®ï¼Œè¿½è¸ªå¥åº·æŒ‡æ ‡</p>
                <div style="margin-top: 1rem; display: flex; align-items: center; gap: 10px;">
                    <span style="font-size: 0.875rem;">ä»Šæ—¥è¿åŠ¨æ—¶é—´ï¼š</span>
                    <input type="number" id="todayExerciseTime" value="32" style="width: 60px; padding: 4px; border: 1px solid #d1d5db; border-radius: 4px;">
                    <span style="font-size: 0.875rem;">åˆ†é’Ÿ</span>
                </div>
                <button onclick="showExerciseHistory()" class="form-control" style="background: #3b82f6; color: white; border: none; cursor: pointer; margin-top: 1rem;">
                    æŸ¥çœ‹è¿åŠ¨è®°å½•
                </button>
            </div>

            <div class="card card-orange">
                <div class="card-header">
                    <h2 class="card-title">è¡¥æ°´å»ºè®®</h2>
                </div>
                <p>æ™ºèƒ½æ¨èç”µè§£è´¨è¡¥å……æ–¹æ¡ˆ</p>
                <div style="margin-top: 1rem; font-size: 0.875rem;">
                    <div id="nextHydrationTime">è·ç¦»ä¸‹æ¬¡è¡¥å……è¿˜æœ‰ï¼š15åˆ†é’Ÿ</div>
                    <div id="todayHydration" style="margin-top: 0.5rem;"></div>
                </div>
            </div>
        </div>

        <!-- è¿åŠ¨ç±»å‹é€‰æ‹© -->
        <div class="card">
            <h2 class="card-title">é€‰æ‹©è¿åŠ¨ç±»å‹</h2>
            <div class="exercise-grid">
                <button class="exercise-btn" id="btn-swimming" onclick="showExerciseDetail('swimming')">
                    <div class="exercise-icon">ğŸŠâ€â™‚ï¸</div>
                    <div>æ¸¸æ³³</div>
                </button>
                <button class="exercise-btn" id="btn-cycling" onclick="showExerciseDetail('cycling')">
                    <div class="exercise-icon">ğŸš´â€â™‚ï¸</div>
                    <div>éª‘è¡Œ</div>
                </button>
                <button class="exercise-btn" id="btn-running" onclick="showExerciseDetail('running')">
                    <div class="exercise-icon">ğŸƒâ€â™‚ï¸</div>
                    <div>è·‘æ­¥</div>
                </button>
                <button class="exercise-btn" id="btn-basketball" onclick="showExerciseDetail('basketball')">
                    <div class="exercise-icon">ğŸ€</div>
                    <div>ç¯®çƒ</div>
                </button>
                <button class="exercise-btn" id="btn-football" onclick="showExerciseDetail('football')">
                    <div class="exercise-icon">âš½</div>
                    <div>è¶³çƒ</div>
                </button>
                <button class="exercise-btn" id="btn-badminton" onclick="showExerciseDetail('badminton')">
                    <div class="exercise-icon">ğŸ¸</div>
                    <div>ç¾½æ¯›çƒ</div>
                </button>
                <button class="exercise-btn" id="btn-tennis" onclick="showExerciseDetail('tennis')">
                    <div class="exercise-icon">ğŸ¾</div>
                    <div>ç½‘çƒ</div>
                </button>
            </div>
        </div>

        <!-- è¿åŠ¨è¯¦æƒ…å¼¹çª— -->
        <div id="exerciseDetail" class="exercise-detail">
            <div class="detail-content">
                <button class="close-btn" onclick="hideExerciseDetail()">Ã—</button>
                <h2 id="exerciseTitle" class="card-title mb-4"></h2>
                
                <div class="form-group">
                    <label>è¿åŠ¨æ—¶é•¿ (åˆ†é’Ÿ)</label>
                    <input type="number" id="duration" class="form-control" placeholder="è¯·è¾“å…¥è¿åŠ¨æ—¶é•¿" min="0">
                </div>
                <div class="form-group">
                    <label>ç¯å¢ƒæ¸©åº¦ (â„ƒ)</label>
                    <input type="number" id="temperature" class="form-control" placeholder="è¯·è¾“å…¥ç¯å¢ƒæ¸©åº¦" min="-20" max="50">
                </div>
                <div class="form-group">
                    <label>æ¶ˆè€—å¡è·¯é‡Œ (kcal)</label>
                    <input type="number" id="calories" class="form-control" placeholder="è¯·è¾“å…¥æ¶ˆè€—å¡è·¯é‡Œ" min="0">
                </div>
                
                <button onclick="calculateElectrolytes()" class="form-control" style="background: #3b82f6; color: white; border: none; cursor: pointer; margin-bottom: 1rem;">
                    è®¡ç®—ç”µè§£è´¨è¡¥å……
                </button>

                <div id="resultCard" class="result-card" style="display: none;">
                    <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem;">
                        <h3 class="card-title mb-2">ç”µè§£è´¨è¡¥å……å»ºè®®</h3>
                        <button onclick="recalculateElectrolytes()" class="form-control" style="background: #10b981; color: white; border: none; cursor: pointer; width: auto; padding: 0.5rem 1rem;">
                            é‡æ–°è®¡ç®—
                        </button>
                    </div>
                    <div class="result-item">
                        <span>å‡ºæ±—é‡ï¼š</span>
                        <span id="sweatVolume">0 L</span>
                    </div>
                    <div class="result-item">
                        <span>é’  (Na+)ï¼š</span>
                        <span id="sodium">0 mg</span>
                    </div>
                    <div class="result-item">
                        <span>é’¾ (K+)ï¼š</span>
                        <span id="potassium">0 mg</span>
                    </div>
                    <div class="result-item">
                        <span>é• (MgÂ²âº)ï¼š</span>
                        <span id="magnesium">0 mg</span>
                    </div>
                    <div class="result-item">
                        <span>æ°¯ (Clâ»)ï¼š</span>
                        <span id="chloride">0 mg</span>
                    </div>
                    
                    <div style="margin-top: 1rem; padding-top: 1rem; border-top: 1px solid #e5e7eb;">
                        <h4 style="margin-bottom: 0.5rem;">é¥®æ–™è¡¥å……å»ºè®®</h4>
                        <div id="drinkRecommendation"></div>
                        <div style="margin-top: 0.5rem; font-size: 0.875rem; color: #ef4444;">
                            âš ï¸ æ³¨æ„ï¼šä¸å»ºè®®ä»…é€šè¿‡é¥®æ–™è¡¥å……å…¨éƒ¨ç”µè§£è´¨ï¼Œå»ºè®®ï¼š
                            <ul style="margin-top: 0.5rem; padding-left: 1rem;">
                                <li>1-2ç“¶è¿åŠ¨é¥®æ–™ + ç”µè§£è´¨ç‰‡</li>
                                <li>è‡ªåˆ¶ç”µè§£è´¨æ°´ï¼ˆæŸ æª¬æ°´+ç›+å°‘è®¸èœ‚èœœï¼‰</li>
                                <li>æ— ç³–ç”µè§£è´¨è¡¥å……å‰‚</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- è¡¥æ°´å»ºè®® -->
        <div class="card" style="margin-top: 20px;">
            <h2 class="card-title">æ¨èé¥®æ–™</h2>
            <div class="drink-grid">
                <div class="drink-card">
                    <img src="/Users/dumingkun/Desktop/365f94b65caefd9ffc676f4d306c277e.jpeg" alt="è„‰åŠ¨" style="width: 100px; height: 100px; object-fit: contain;">
                    <h3>è„‰åŠ¨</h3>
                    <div class="drink-info">
                        <p>é’ å«é‡ï¼š18mg</p>
                        <p>é’¾å«é‡ï¼š12mg</p>
                        <p>ç³–åˆ†ï¼šé«˜</p>
                        <p>æ¨èé‡ï¼š300ml</p>
                    </div>
                </div>
                <div class="drink-card">
                    <img src="/Users/dumingkun/Desktop/18821d8f0e01911c6011763978ca16c4.jpg" alt="å®çŸ¿åŠ›æ°´ç‰¹" style="width: 100px; height: 100px; object-fit: contain;">
                    <h3>å®çŸ¿åŠ›æ°´ç‰¹</h3>
                    <div class="drink-info">
                        <p>é’ å«é‡ï¼š49mg</p>
                        <p>é’¾å«é‡ï¼š20mg</p>
                        <p>ç³–åˆ†ï¼šä¸­</p>
                        <p>æ¨èé‡ï¼š300ml</p>
                    </div>
                </div>
                <div class="drink-card">
                    <img src="/Users/dumingkun/Desktop/af05ca5e3c22b9c77b02ab7c10b81753.jpeg" alt="å°–å«" style="width: 100px; height: 100px; object-fit: contain;">
                    <h3>å°–å«</h3>
                    <div class="drink-info">
                        <p>é’ å«é‡ï¼š50mg</p>
                        <p>é’¾å«é‡ï¼š30mg</p>
                        <p>ç³–åˆ†ï¼šä¸­</p>
                        <p>æ¨èé‡ï¼š300ml</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- è¿åŠ¨è®°å½•å¼¹çª— -->
        <div id="exerciseHistory" class="exercise-detail">
            <div class="detail-content">
                <button class="close-btn" onclick="hideExerciseHistory()">Ã—</button>
                <h2 class="card-title mb-4">è¿åŠ¨è®°å½•</h2>
                <div id="historyList" style="max-height: 60vh; overflow-y: auto;">
                    <!-- è¿åŠ¨è®°å½•å°†åœ¨è¿™é‡ŒåŠ¨æ€æ˜¾ç¤º -->
                </div>
            </div>
        </div>

        <!-- æ–°å¢ï¼šçƒ­èº«ä¸æ‹‰ä¼¸åŠ¨ä½œå¼¹çª— -->
        <div id="warmupModal" class="exercise-detail">
            <div class="detail-content">
                <button class="close-btn" onclick="hideWarmupModal()">Ã—</button>
                <h2 class="card-title mb-4" id="warmupTitle">çƒ­èº«ä¸æ‹‰ä¼¸åŠ¨ä½œ</h2>
                <div id="warmupContent"></div>
            </div>
        </div>

        <!-- æ–°å¢ï¼šå¥åº·å¥èº«é£Ÿè°±æ¨èå¡ç‰‡ -->
        <div class="card" style="margin-top: 20px;">
            <h2 class="card-title">å¥åº·å¥èº«é£Ÿè°±æ¨è</h2>
            <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(320px, 1fr)); gap: 20px;">
                <!-- è¿åŠ¨å‰é¤ -->
                <div style="background: #f0fdf4; border-radius: 10px; padding: 16px;">
                    <h3 style="margin-bottom: 0.5rem;">âš¡ è¿åŠ¨å‰é¤ï¼ˆå»ºè®®åœ¨è¿åŠ¨å‰1-2å°æ—¶åƒï¼‰</h3>
                    <div style="display:flex;align-items:center;gap:10px;">
                        <img src="https://images.pexels.com/photos/1640777/pexels-photo-1640777.jpeg?auto=compress&w=200&h=200&fit=crop" alt="å…¨éº¦ç‡•éº¦ç¢—" style="width:80px;height:80px;border-radius:8px;object-fit:cover;">
                        <div>
                            <b>ğŸ¥£ å…¨éº¦ç‡•éº¦ç¢—</b><br>
                            <span style="font-size:0.95em;">äº”é»‘éº¦ç‰‡/ç‡•éº¦ç‰‡+é¦™è•‰+èŠ±ç”Ÿé…±+èœ‚èœœ+ç‰›å¥¶/è±†å¥¶</span>
                        </div>
                    </div>
                    <div style="color:#16a34a;font-size:0.95em;margin:0.5em 0;">æ…¢æ¶ˆåŒ–ç¢³æ°´+ä¼˜è´¨è„‚è‚ª+ä½GIï¼Œç¨³å®šè¡€ç³–ï¼Œé¿å…ä½è¡€ç³–</div>
                    <div style="color:#64748b;font-size:0.93em;">åšæ³•ï¼šéº¦ç‰‡åŠ çƒ­ç‰›å¥¶ç…®3åˆ†é’Ÿï¼ŒåŠ å…¥å…¶ä»–é…æ–™å³å¯</div>
                    <hr style="margin:1em 0;">
                    <div style="display:flex;align-items:center;gap:10px;">
                        <img src="https://images.pexels.com/photos/461382/pexels-photo-461382.jpeg?auto=compress&w=200&h=200&fit=crop" alt="é¸¡è›‹å…¨éº¦ä¸‰æ˜æ²»" style="width:80px;height:80px;border-radius:8px;object-fit:cover;">
                        <div>
                            <b>ğŸ é¸¡è›‹å…¨éº¦ä¸‰æ˜æ²»</b><br>
                            <span style="font-size:0.95em;">å…¨éº¦é¢åŒ…+æ°´ç…®è›‹+ç”Ÿèœ/ç•ªèŒ„+é…¸å¥¶</span>
                        </div>
                    </div>
                    <div style="color:#16a34a;font-size:0.95em;margin:0.5em 0;">ä¸°å¯Œè›‹ç™½+é€‚é‡ç¢³æ°´+è”¬èœçº¤ç»´ï¼Œä¸æ²¹è…»</div>
                </div>
                <!-- è¿åŠ¨åæ¢å¤é¤ -->
                <div style="background: #f0f9ff; border-radius: 10px; padding: 16px;">
                    <h3 style="margin-bottom: 0.5rem;">ğŸ’ª è¿åŠ¨åæ¢å¤é¤ï¼ˆå»ºè®®è¿åŠ¨å30åˆ†é’Ÿå†…è¿›é£Ÿï¼‰</h3>
                    <div style="display:flex;align-items:center;gap:10px;">
                        <img src="https://images.pexels.com/photos/593837/pexels-photo-593837.jpeg?auto=compress&w=200&h=200&fit=crop" alt="é¸¡èƒ¸è‚‰ç³™ç±³é¥­è”¬èœæ‹¼ç›˜" style="width:80px;height:80px;border-radius:8px;object-fit:cover;">
                        <div>
                            <b>ğŸš é¸¡èƒ¸è‚‰+ç³™ç±³é¥­+è”¬èœæ‹¼ç›˜</b><br>
                            <span style="font-size:0.95em;">é¸¡èƒ¸è‚‰+ç³™ç±³/å°ç±³é¥­+è¥¿å…°èŠ±/èƒ¡èåœ/ç‰ç±³</span>
                        </div>
                    </div>
                    <div style="color:#0ea5e9;font-size:0.95em;margin:0.5em 0;">é«˜è›‹ç™½ä¿®å¤è‚Œè‚‰ï¼Œå¤åˆç¢³æ°´è¡¥å……èƒ½é‡ï¼Œè”¬èœå¸®åŠ©æ¶ˆåŒ–æŠ—ç‚</div>
                    <hr style="margin:1em 0;">
                    <div style="display:flex;align-items:center;gap:10px;">
                        <img src="https://images.pexels.com/photos/1640772/pexels-photo-1640772.jpeg?auto=compress&w=200&h=200&fit=crop" alt="è›‹ç™½å¥¶æ˜”æ°´æœ" style="width:80px;height:80px;border-radius:8px;object-fit:cover;">
                        <div>
                            <b>ğŸ¥¤ è›‹ç™½å¥¶æ˜”+æ°´æœ</b><br>
                            <span style="font-size:0.95em;">ä¹³æ¸…è›‹ç™½+é¦™è•‰/è“è“+ç‰›å¥¶/è±†å¥¶+åšæœ</span>
                        </div>
                    </div>
                    <div style="color:#0ea5e9;font-size:0.95em;margin:0.5em 0;">å¿«é€Ÿå¸æ”¶è›‹ç™½+æŠ—æ°§åŒ–ç‰©+å¾®é‡è„‚è‚ªï¼ŒåŠ©åŠ›è‚Œè‚‰ä¿®å¤å’Œæ¢å¤</div>
                </div>
                <!-- æ—¥å¸¸æ§åˆ¶ä½“é‡ & å¢å¼ºä»£è°¢é¤ -->
                <div style="background: #fef9c3; border-radius: 10px; padding: 16px;">
                    <h3 style="margin-bottom: 0.5rem;">ğŸ”¥ æ—¥å¸¸æ§åˆ¶ä½“é‡ & å¢å¼ºä»£è°¢é¤</h3>
                    <div style="display:flex;align-items:center;gap:10px;">
                        <img src="https://images.pexels.com/photos/1640770/pexels-photo-1640770.jpeg?auto=compress&w=200&h=200&fit=crop" alt="é‡‘æªé±¼æ²™æ‹‰é¥­" style="width:80px;height:80px;border-radius:8px;object-fit:cover;">
                        <div>
                            <b>ğŸ¥— é‡‘æªé±¼æ²™æ‹‰é¥­</b><br>
                            <span style="font-size:0.95em;">é‡‘æªé±¼ç½å¤´+è”¬èœ+å°ç±³é¥­/è—œéº¦+é…¸å¥¶/æ©„æ¦„æ²¹</span>
                        </div>
                    </div>
                    <div style="color:#eab308;font-size:0.95em;margin:0.5em 0;">é¥±è…¹æ„Ÿå¼ºã€è„‚è‚ªä½ï¼Œå¯Œå«DHAï¼Œæœ‰åŠ©äºå¿ƒè¡€ç®¡å¥åº·</div>
                    <div style="color:#64748b;font-size:0.93em;">çƒ­é‡ï¼šçº¦450-550 kcal</div>
                    <hr style="margin:1em 0;">
                    <div style="display:flex;align-items:center;gap:10px;">
                        <img src="/Users/dumingkun/Desktop/å¯»æ‰¾è¥¿çº¢æŸ¿é¸¡è›‹ç‚’è±†è…å›¾ç‰‡.png" style="width:80px;height:80px;border-radius:8px;object-fit:cover;" alt="è¥¿çº¢æŸ¿é¸¡è›‹ç‚’è±†è…">
                        <div>
                            <b>ğŸ³ è¥¿çº¢æŸ¿é¸¡è›‹ç‚’è±†è…</b><br>
                            <span style="font-size:0.95em;">é¸¡è›‹+å«©è±†è…+è¥¿çº¢æŸ¿+æ©„æ¦„æ²¹</span>
                        </div>
                    </div>
                    <div style="color:#eab308;font-size:0.95em;margin:0.5em 0;">æ¤ç‰©è›‹ç™½+åŠ¨ç‰©è›‹ç™½ç»“åˆï¼Œæ¶ˆåŒ–å¥½ä¸”å¯¹è‚ èƒƒå‹å¥½</div>
                    <div style="color:#64748b;font-size:0.93em;">æ­é…ï¼šäº”è°·ç²¥æˆ–å°ç±³é¥­</div>
                    <hr style="margin:1em 0;">
                    <div style="display:flex;align-items:center;gap:10px;">
                        <img src="/Users/dumingkun/Desktop/æ‚ç²®ç²¥å›¾ç‰‡ copy.png" style="width:80px;height:80px;border-radius:8px;object-fit:cover;" alt="å‡è„‚æ‚ç²®ç²¥æ—©é¤">
                        <div>
                            <b>ğŸ¥£ å‡è„‚æ‚ç²®ç²¥æ—©é¤</b><br>
                            <span style="font-size:0.95em;">äº”é»‘éº¦ç‰‡+çº¢æ£+é»‘è±†/è–ç±³+ç‰›å¥¶/æ°´ç…®</span>
                        </div>
                    </div>
                    <div style="color:#eab308;font-size:0.95em;margin:0.5em 0;">é«˜çº¤ç»´ã€ä½è„‚è‚ªï¼Œé€‚åˆå‡è„‚å’Œæ—¥å¸¸å¥åº·æ—©é¤</div>
                </div>
            </div>
        </div>
    </div>

    <script>
        // é¡µé¢åŠ è½½æ—¶è‡ªåŠ¨æ¸…ç©ºæ‰€æœ‰æœ¬åœ°æ³¨å†Œç”¨æˆ·æ•°æ®
        localStorage.removeItem('userData');

        const exerciseTypes = {
            swimming: { name: 'æ¸¸æ³³', factor: 0.6 },
            cycling: { name: 'éª‘è¡Œ', factor: 0.9 },
            running: { name: 'è·‘æ­¥', factor: 1.0 },
            basketball: { name: 'ç¯®çƒ', factor: 1.2 },
            football: { name: 'è¶³çƒ', factor: 1.3 },
            badminton: { name: 'ç¾½æ¯›çƒ', factor: 1.0 },
            tennis: { name: 'ç½‘çƒ', factor: 1.0 }
        };

        // ä¿å­˜è¿åŠ¨è®°å½•
        let exerciseHistory = [];

        // ç”¨æˆ·æ•°æ®ç®¡ç†
        let currentUser = null;
        let userData = JSON.parse(localStorage.getItem('userData')) || {};

        // ç”Ÿæˆå¤´åƒé€‰é¡¹
        function generateAvatarOptions() {
            const avatarGrid = document.getElementById('avatarGrid');
            const seeds = ['default', 'john', 'jane', 'mike', 'sarah', 'david', 'lisa', 'tom'];
            
            seeds.forEach(seed => {
                const img = document.createElement('img');
                img.src = `https://api.dicebear.com/7.x/avataaars/svg?seed=${seed}`;
                img.className = 'avatar-option';
                img.onclick = () => selectAvatar(seed);
                avatarGrid.appendChild(img);
            });
        }

        function selectAvatar(seed) {
            document.querySelectorAll('.avatar-option').forEach(avatar => {
                avatar.classList.remove('selected');
            });
            event.target.classList.add('selected');
            currentUser = { ...currentUser, avatarSeed: seed };
        }

        function showLoginModal() {
            document.getElementById('loginModal').classList.add('active');
            if (!document.getElementById('avatarGrid').children.length) {
                generateAvatarOptions();
            }
        }

        function hideLoginModal() {
            document.getElementById('loginModal').classList.remove('active');
        }

        // ç™»å½•/æ³¨å†Œåˆ‡æ¢é€»è¾‘
        let isRegister = false;
        document.getElementById('toggleLoginRegister').onclick = function() {
            isRegister = !isRegister;
            document.getElementById('loginTitle').textContent = isRegister ? 'ç”¨æˆ·æ³¨å†Œ' : 'ç”¨æˆ·ç™»å½•';
            document.getElementById('loginSubmitBtn').textContent = isRegister ? 'æ³¨å†Œ' : 'ç™»å½•';
            document.getElementById('avatarSelectGroup').style.display = isRegister ? 'block' : 'none';
            document.getElementById('registerWeightGroup').style.display = isRegister ? 'block' : 'none';
            document.getElementById('registerAgeGroup').style.display = isRegister ? 'block' : 'none';
            this.textContent = isRegister ? 'å·²æœ‰è´¦å·ï¼Ÿç™»å½•' : 'æ²¡æœ‰è´¦å·ï¼Ÿæ³¨å†Œ';
        };

        function submitLoginOrRegister() {
            if (isRegister) {
                register();
            } else {
                login();
            }
        }

        // æ³¨å†Œé€»è¾‘
        function register() {
            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;
            const selectedAvatar = document.querySelector('.avatar-option.selected');
            const weight = parseFloat(document.getElementById('registerWeight').value);
            const age = parseInt(document.getElementById('registerAge').value);
            if (!username || !password || !selectedAvatar || !weight || !age) {
                alert('è¯·å¡«å†™å®Œæ•´ä¿¡æ¯å¹¶é€‰æ‹©å¤´åƒ');
                return;
            }
            if (userData[username]) {
                alert('ç”¨æˆ·åå·²å­˜åœ¨ï¼Œè¯·ç›´æ¥ç™»å½•');
                return;
            }
            userData[username] = {
                password,
                avatarSeed: selectedAvatar.src.split('seed=')[1],
                exerciseHistory: [],
                lastLogin: new Date().toISOString(),
                weight,
                age
            };
            localStorage.setItem('userData', JSON.stringify(userData));
            alert('æ³¨å†ŒæˆåŠŸï¼Œè¯·ç™»å½•ï¼');
            isRegister = false;
            document.getElementById('loginTitle').textContent = 'ç”¨æˆ·ç™»å½•';
            document.getElementById('loginSubmitBtn').textContent = 'ç™»å½•';
            document.getElementById('avatarSelectGroup').style.display = 'none';
            document.getElementById('registerWeightGroup').style.display = 'none';
            document.getElementById('registerAgeGroup').style.display = 'none';
            document.getElementById('toggleLoginRegister').textContent = 'æ²¡æœ‰è´¦å·ï¼Ÿæ³¨å†Œ';
        }

        // ç™»å½•é€»è¾‘ï¼ˆå¤´åƒé€‰æ‹©ä¸å†å¼ºåˆ¶ï¼‰
        function login() {
            const username = document.getElementById('loginUsername').value;
            const password = document.getElementById('loginPassword').value;
            if (!username || !password) {
                alert('è¯·å¡«å†™å®Œæ•´ä¿¡æ¯');
                return;
            }
            if (!userData[username]) {
                alert('ç”¨æˆ·ä¸å­˜åœ¨ï¼Œè¯·æ³¨å†Œ');
                return;
            }
            if (userData[username].password !== password) {
                alert('å¯†ç é”™è¯¯');
                return;
            }
            currentUser = {
                username,
                avatarSeed: userData[username].avatarSeed
            };
            document.getElementById('userAvatar').src = `https://api.dicebear.com/7.x/avataaars/svg?seed=${currentUser.avatarSeed}`;
            document.getElementById('userName').textContent = username;
            exerciseHistory = userData[username].exerciseHistory;
            userData[username].lastLogin = new Date().toISOString();
            localStorage.setItem('userData', JSON.stringify(userData));
            hideLoginModal();
            updateTodayExerciseTime();
            updateLoginStatus();
        }

        // æ‹¦æˆªæœªç™»å½•æ“ä½œ
        function requireLoginAlert() {
            alert('è¯·å…ˆç™»å½•åå†ä½¿ç”¨æ­¤åŠŸèƒ½');
            showLoginModal();
        }
        // è¿åŠ¨ç±»å‹æŒ‰é’®æ‹¦æˆª
        const btnIds = ['btn-swimming','btn-cycling','btn-running','btn-basketball','btn-football','btn-badminton','btn-tennis'];
        btnIds.forEach(id => {
            const btn = document.getElementById(id);
            if (btn) {
                btn.onclick = function() {
                    if (!currentUser) {
                        requireLoginAlert();
                        return false;
                    } else {
                        showExerciseDetail(id.replace('btn-',''));
                    }
                }
            }
        });
        // è¿åŠ¨æ•°æ®è¾“å…¥æ‹¦æˆª
        document.querySelectorAll('.record-input').forEach(input => {
            input.onfocus = function() {
                if (!currentUser) {
                    requireLoginAlert();
                    this.blur();
                }
            }
        });

        // æ›´æ–°ä»Šæ—¥è¿åŠ¨æ—¶é—´
        function updateTodayExerciseTime() {
            if (!currentUser) {
                document.getElementById('todayExerciseTime').value = '0';
                return;
            }
            const today = new Date().toISOString().split('T')[0];
            const todayRecords = exerciseHistory.filter(record => record.date.startsWith(today));
            const totalTime = todayRecords.reduce((sum, record) => sum + (parseInt(record.duration) || 0), 0);
            document.getElementById('todayExerciseTime').value = totalTime;
            updateHydrationAdvice(totalTime);
        }

        function updateHydrationAdvice(exerciseTime) {
            const nextTime = Math.max(15 - Math.floor(exerciseTime / 30), 5);
            document.getElementById('nextHydrationTime').textContent = `è·ç¦»ä¸‹æ¬¡è¡¥å……è¿˜æœ‰ï¼š${nextTime}åˆ†é’Ÿ`;
            
            // è®¡ç®—ä»Šæ—¥æ€»è¡¥æ°´é‡ï¼ˆæ ¹æ®è¿åŠ¨ç±»å‹è°ƒæ•´ï¼‰
            const currentExercise = lastCalculation.exerciseType || 'è·‘æ­¥';
            const typeFactor = Object.values(exerciseTypes).find(type => type.name === currentExercise)?.factor || 1.0;
            const baseWater = Math.ceil(exerciseTime / 30) * 300; // æ¯30åˆ†é’ŸåŸºç¡€è¡¥æ°´é‡300ml
            const totalWater = Math.round(baseWater * typeFactor);
            
            document.getElementById('todayHydration').textContent = `ä»Šæ—¥å»ºè®®è¡¥æ°´é‡ï¼š${totalWater}ml`;
        }

        function showExerciseDetail(type) {
            const detail = document.getElementById('exerciseDetail');
            const title = document.getElementById('exerciseTitle');
            title.textContent = exerciseTypes[type].name;
            detail.classList.add('active');
        }

        function hideExerciseDetail() {
            const detail = document.getElementById('exerciseDetail');
            detail.classList.remove('active');
        }

        function calculateDrinkRecommendation(sodium, potassium) {
            const drinks = {
                "è„‰åŠ¨": { 
                    name: "è„‰åŠ¨",
                    na: 360,  // æ¯500mlçš„é’ å«é‡
                    k: 60,    // æ¯500mlçš„é’¾å«é‡
                    sugar: 34  // æ¯500mlçš„ç³–å«é‡
                },
                "å°–å«": {
                    name: "å°–å«",
                    na: 480,
                    k: 80,
                    sugar: 28
                }
            };

            let recommendations = {};
            for (let drink in drinks) {
                const bottlesNa = Math.ceil(sodium / drinks[drink].na);
                const bottlesK = Math.ceil(potassium / drinks[drink].k);
                const bottles = Math.max(bottlesNa, bottlesK);
                const totalSugar = bottles * drinks[drink].sugar;
                
                recommendations[drink] = {
                    bottles: bottles,
                    totalSugar: totalSugar,
                    totalVolume: bottles * 500
                };
            }

            return recommendations;
        }

        // ä¿å­˜ä¸Šä¸€æ¬¡çš„è®¡ç®—ç»“æœ
        let lastCalculation = {
            weight: 0,
            age: 0,
            duration: 0,
            temperature: 0,
            calories: 0,
            exerciseType: ''
        };

        function calculateElectrolytes() {
            if (!currentUser) {
                alert('è¯·å…ˆç™»å½•åå†è®°å½•è¿åŠ¨æ•°æ®');
                showLoginModal();
                return;
            }
            const weight = userData[currentUser.username].weight;
            const age = userData[currentUser.username].age;
            const duration = parseInt(document.getElementById('duration').value);
            const temperature = parseFloat(document.getElementById('temperature').value);
            const calories = parseInt(document.getElementById('calories').value);
            const exerciseType = document.getElementById('exerciseTitle').textContent;
            if (!weight || !age || !duration || !temperature || !calories) {
                alert('è¯·å¡«å†™æ‰€æœ‰ä¿¡æ¯');
                return;
            }
            lastCalculation = {
                weight,
                age,
                duration,
                temperature,
                calories,
                exerciseType
            };
            const results = calculateAndDisplayResults(weight, age, duration, temperature, calories, exerciseType);
            if (currentUser) {
                const now = new Date();
                const dateStr = `${now.getFullYear()}-${String(now.getMonth() + 1).padStart(2, '0')}-${String(now.getDate()).padStart(2, '0')} ${String(now.getHours()).padStart(2, '0')}:${String(now.getMinutes()).padStart(2, '0')}`;
                const record = {
                    date: dateStr,
                    exerciseType,
                    weight,
                    age,
                    duration,
                    calories,
                    temperature,
                    sweatVolume: results.sweatVolume,
                    sodium: results.sodium,
                    potassium: results.potassium,
                    magnesium: results.magnesium,
                    chloride: results.chloride,
                    recommendedDrinks: results.recommendedDrinks,
                    drinkDetails: results.drinkDetails
                };
                exerciseHistory.unshift(record);
                userData[currentUser.username].exerciseHistory = exerciseHistory;
                localStorage.setItem('userData', JSON.stringify(userData));
            }
            const todayTime = parseInt(document.getElementById('todayExerciseTime').value) || 0;
            document.getElementById('todayExerciseTime').value = todayTime + duration;
            updateHydrationAdvice(todayTime + duration);
        }

        function recalculateElectrolytes() {
            // ä½¿ç”¨ä¿å­˜çš„æ•°æ®é‡æ–°è®¡ç®—
            calculateAndDisplayResults(
                lastCalculation.weight,
                lastCalculation.age,
                lastCalculation.duration,
                lastCalculation.temperature,
                lastCalculation.calories,
                lastCalculation.exerciseType
            );
        }

        function calculateAndDisplayResults(weight, age, duration, temperature, calories, exerciseType) {
            // è®¡ç®—å‡ºæ±—é‡
            const sweatRate = 0.015; // L/kg/h
            const tempFactor = 1 + (temperature - 20) * 0.02;
            const sweatVolume = weight * sweatRate * (duration / 60) * tempFactor;
            
            // è·å–å½“å‰è¿åŠ¨ç±»å‹çš„ç³»æ•°
            const typeFactor = Object.values(exerciseTypes).find(type => type.name === exerciseType).factor;
            const adjustedSweatVolume = sweatVolume * typeFactor;

            // è®¡ç®—ç”µè§£è´¨æµå¤±é‡
            const sodium = adjustedSweatVolume * 1000;
            const potassium = adjustedSweatVolume * 200;
            const magnesium = adjustedSweatVolume * 20;
            const chloride = adjustedSweatVolume * 1500;

            // è®¡ç®—å»ºè®®è¡¥å……é‡ï¼ˆè€ƒè™‘å¹´é¾„å› ç´ ï¼‰
            const ageFactor = age < 18 ? 1.2 : age > 50 ? 0.8 : 1.0;
            const recommendedSodium = sodium * ageFactor;
            const recommendedPotassium = potassium * ageFactor;
            const recommendedMagnesium = magnesium * ageFactor;
            const recommendedChloride = chloride * ageFactor;

            // è®¡ç®—é¥®æ–™æ¨è
            const recommendations = calculateDrinkRecommendation(recommendedSodium, recommendedPotassium);
            
            // æ˜¾ç¤ºé¥®æ–™æ¨è
            let recommendationHtml = '<div style="display: grid; gap: 1rem;">';
            let drinkDetails = [];
            for (let drink in recommendations) {
                const rec = recommendations[drink];
                recommendationHtml += `
                    <div style="background: #f8fafc; padding: 1rem; border-radius: 8px;">
                        <h5 style="margin-bottom: 0.5rem;">${drink}</h5>
                        <div style="font-size: 0.875rem;">
                            <div>å»ºè®®è¡¥å……ï¼š${rec.bottles}ç“¶ï¼ˆ${rec.totalVolume}mlï¼‰</div>
                            <div style="color: #ef4444;">å«ç³–é‡ï¼š${rec.totalSugar}å…‹</div>
                        </div>
                    </div>
                `;
                drinkDetails.push({
                    name: drink,
                    bottles: rec.bottles,
                    volume: rec.totalVolume,
                    sugar: rec.totalSugar
                });
            }
            recommendationHtml += '</div>';

            // ç”Ÿæˆé¥®æ–™æ¨èæ–‡æœ¬
            let recommendedDrinks = '';
            for (let drink in recommendations) {
                const rec = recommendations[drink];
                recommendedDrinks += `${drink}${rec.bottles}ç“¶ `;
            }

            // æ˜¾ç¤ºç»“æœ
            document.getElementById('resultCard').style.display = 'block';
            document.getElementById('sweatVolume').textContent = adjustedSweatVolume.toFixed(2) + ' L';
            document.getElementById('sodium').textContent = Math.round(recommendedSodium) + ' mg';
            document.getElementById('potassium').textContent = Math.round(recommendedPotassium) + ' mg';
            document.getElementById('magnesium').textContent = Math.round(recommendedMagnesium) + ' mg';
            document.getElementById('chloride').textContent = Math.round(recommendedChloride) + ' mg';
            document.getElementById('drinkRecommendation').innerHTML = recommendationHtml;

            return {
                sweatVolume: adjustedSweatVolume.toFixed(2),
                recommendedDrinks: recommendedDrinks.trim(),
                sodium: Math.round(recommendedSodium),
                potassium: Math.round(recommendedPotassium),
                magnesium: Math.round(recommendedMagnesium),
                chloride: Math.round(recommendedChloride),
                drinkDetails: drinkDetails
            };
        }

        function showExerciseHistory() {
            const history = document.getElementById('exerciseHistory');
            const historyList = document.getElementById('historyList');
            
            if (!currentUser) {
                alert('è¯·å…ˆç™»å½•');
                return;
            }
            
            // ç”Ÿæˆå†å²è®°å½•HTML
            let historyHtml = '';
            exerciseHistory.forEach((record, index) => {
                historyHtml += `
                    <div style="background: #f8fafc; padding: 1rem; border-radius: 8px; margin-bottom: 1rem;">
                        <div style="display: flex; justify-content: space-between; margin-bottom: 0.5rem;">
                            <h4 style="margin: 0;">${record.exerciseType}</h4>
                            <span style="color: #6b7280;">${record.date}</span>
                        </div>
                        <div style="font-size: 0.875rem; color: #4b5563;">
                            <div>åŸºæœ¬ä¿¡æ¯ï¼š</div>
                            <div>ä½“é‡ï¼š${record.weight}kg</div>
                            <div>å¹´é¾„ï¼š${record.age}å²</div>
                            <div>è¿åŠ¨æ—¶é•¿ï¼š${record.duration}åˆ†é’Ÿ</div>
                            <div>æ¶ˆè€—å¡è·¯é‡Œï¼š${record.calories}kcal</div>
                            <div>ç¯å¢ƒæ¸©åº¦ï¼š${record.temperature}â„ƒ</div>
                            <div style="margin-top: 0.5rem;">å‡ºæ±—æƒ…å†µï¼š</div>
                            <div>å‡ºæ±—é‡ï¼š${record.sweatVolume}L</div>
                            <div style="margin-top: 0.5rem;">ç”µè§£è´¨æµå¤±ï¼š</div>
                            <div>é’  (Na+)ï¼š${record.sodium}mg</div>
                            <div>é’¾ (K+)ï¼š${record.potassium}mg</div>
                            <div>é• (MgÂ²âº)ï¼š${record.magnesium}mg</div>
                            <div>æ°¯ (Clâ»)ï¼š${record.chloride}mg</div>
                            <div style="margin-top: 0.5rem;">è¡¥å……å»ºè®®ï¼š</div>
                            ${record.drinkDetails.map(drink => `
                                <div style="margin-left: 1rem;">
                                    <div>${drink.name}ï¼š${drink.bottles}ç“¶ï¼ˆ${drink.volume}mlï¼‰</div>
                                    <div style="color: #ef4444;">å«ç³–é‡ï¼š${drink.sugar}å…‹</div>
                                </div>
                            `).join('')}
                        </div>
                    </div>
                `;
            });

            if (historyHtml === '') {
                historyHtml = '<div style="text-align: center; color: #6b7280;">æš‚æ— è¿åŠ¨è®°å½•</div>';
            }

            historyList.innerHTML = historyHtml;
            history.classList.add('active');
        }

        function hideExerciseHistory() {
            const history = document.getElementById('exerciseHistory');
            history.classList.remove('active');
        }

        // æ·»åŠ è¾“å…¥æ¡†å˜åŒ–ç›‘å¬
        document.querySelectorAll('.form-control').forEach(input => {
            input.addEventListener('change', function() {
                if (document.getElementById('resultCard').style.display === 'block') {
                    calculateElectrolytes();
                }
            });
        });

        // åˆå§‹åŒ–é¡µé¢
        updateTodayExerciseTime();
        generateAvatarOptions();

        // æ·»åŠ ç™»å‡ºåŠŸèƒ½
        function logout() {
            currentUser = null;
            document.getElementById('userAvatar').src = 'https://api.dicebear.com/7.x/avataaars/svg?seed=default';
            document.getElementById('userName').textContent = 'æœªç™»å½•';
            updateTodayExerciseTime();
        }

        // ä¿®æ”¹ç”¨æˆ·ä¿¡æ¯åŒºåŸŸï¼Œæ·»åŠ ç™»å‡ºæŒ‰é’®
        document.querySelector('.user-info').innerHTML = `
            <img id="userAvatar" src="https://api.dicebear.com/7.x/avataaars/svg?seed=default" alt="ç”¨æˆ·å¤´åƒ" class="avatar" onclick="showLoginModal()">
            <span id="userName">æœªç™»å½•</span>
            <button class="login-btn" onclick="showLoginModal()">ç™»å½•</button>
            <button class="login-btn" onclick="logout()" style="display: none; background: #ef4444;" id="logoutBtn">ç™»å‡º</button>
        `;

        // æ–°å¢ï¼šç¦ç”¨/å¯ç”¨è¿åŠ¨ç±»å‹æŒ‰é’®å’Œæ•°æ®è¾“å…¥æ¡†
        function setExerciseUIEnabled(enabled) {
            const btnIds = ['btn-swimming','btn-cycling','btn-running','btn-basketball','btn-football','btn-badminton','btn-tennis'];
            btnIds.forEach(id => {
                const btn = document.getElementById(id);
                if (btn) btn.disabled = !enabled;
            });
            document.querySelectorAll('.record-input').forEach(input => {
                input.disabled = !enabled;
            });
        }

        // ç™»å½•å’Œç™»å‡ºæ—¶è°ƒç”¨
        function updateLoginStatus() {
            const logoutBtn = document.getElementById('logoutBtn');
            if (currentUser) {
                document.querySelector('.login-btn').style.display = 'none';
                logoutBtn.style.display = 'block';
                setExerciseUIEnabled(true);
            } else {
                document.querySelector('.login-btn').style.display = 'block';
                logoutBtn.style.display = 'none';
                setExerciseUIEnabled(false);
            }
        }

        // é¡µé¢åˆå§‹åŒ–æ—¶ç¦ç”¨
        setExerciseUIEnabled(false);

        // çƒ­èº«ä¸æ‹‰ä¼¸åŠ¨ä½œæ•°æ®
        const warmupData = {
            swimming: [
                {
                    name: 'æ‰‹è‡‚ç¯ç»•',
                    img: 'https://oaidalleapiprodscus.blob.core.windows.net/private/org-xxx/dalle-ai-swim-arm-circle.png',
                    desc: 'åŒæ‰‹ä¼¸ç›´ï¼Œä»å‰å‘åç»•å¤§åœˆ10æ¬¡ï¼Œå†ä»åå‘å‰10æ¬¡ï¼Œæ´»åŠ¨è‚©å…³èŠ‚ã€‚'
                },
                {
                    name: 'è‚©éƒ¨æ”¾æ¾è½¬åŠ¨',
                    img: 'https://oaidalleapiprodscus.blob.core.windows.net/private/org-xxx/dalle-ai-shoulder-relax.png',
                    desc: 'è€¸è‚©ï¼Œç„¶åæ”¾æ¾ï¼ŒåŒæ—¶è‚©è†€ç”»åœˆå„10æ¬¡ã€‚'
                },
                {
                    name: 'è‚©éƒ¨æ‹‰ä¼¸',
                    img: 'https://oaidalleapiprodscus.blob.core.windows.net/private/org-xxx/dalle-ai-shoulder-stretch.png',
                    desc: 'ä¸€åªæ‰‹è‡‚ä¼¸ç›´æ¨ªè¿‡èƒ¸å‰ï¼Œå¦ä¸€åªæ‰‹æ‹‰ä½æ‰‹è‡‚è‚˜éƒ¨ï¼Œä¿æŒ20ç§’ï¼Œæ¢æ‰‹ã€‚'
                },
                {
                    name: 'èƒŒéƒ¨æ‹‰ä¼¸ï¼ˆçŒ«å¼ä¼¸å±•ï¼‰',
                    img: 'https://oaidalleapiprodscus.blob.core.windows.net/private/org-xxx/dalle-ai-cat-stretch.png',
                    desc: 'å››è‚¢ç€åœ°ï¼Œæ‹±èƒŒå¸æ°”ï¼Œç„¶åå¡Œè…°æŠ¬å¤´å‘¼æ°”ï¼Œå„æŒç»­5ç§’ï¼Œåš5ç»„ã€‚'
                }
            ],
            football: [
                {
                    name: 'é«˜æŠ¬è…¿',
                    img: 'https://oaidalleapiprodscus.blob.core.windows.net/private/org-xxx/dalle-ai-high-knee.png',
                    desc: 'åŸåœ°é«˜æŠ¬è…¿30ç§’ã€‚'
                },
                {
                    name: 'å¼“æ­¥èµ°',
                    img: 'https://oaidalleapiprodscus.blob.core.windows.net/private/org-xxx/dalle-ai-lunge-walk.png',
                    desc: 'æ¯ä¸€æ­¥ä¸‹å‹åˆ°è†ç›–90åº¦ï¼Œå‰åè…¿äº¤æ¢èµ°10æ­¥ã€‚'
                },
                {
                    name: 'è‚¡å››å¤´è‚Œæ‹‰ä¼¸',
                    img: 'https://oaidalleapiprodscus.blob.core.windows.net/private/org-xxx/dalle-ai-quad-stretch.png',
                    desc: 'ç«™ç«‹ï¼Œä¸€åªæ‰‹æ‹‰ä½åŒä¾§è„šè¸è´´è¿‘è‡€éƒ¨ï¼Œä¿æŒ20ç§’ï¼Œæ¢è¾¹ã€‚'
                },
                {
                    name: 'å°è…¿æ‹‰ä¼¸ï¼ˆé å¢™è¹¬ä¼¸ï¼‰',
                    img: 'https://oaidalleapiprodscus.blob.core.windows.net/private/org-xxx/dalle-ai-calf-wall-stretch.png',
                    desc: 'ä¸€è„šå‰ä¸€è„šåï¼Œåè„šè„šè·Ÿè´´åœ°ï¼Œå‰è„šå±ˆè†é å¢™ï¼Œä¿æŒ20ç§’ã€‚'
                }
            ],
            basketball: [
                {
                    name: 'è·³è·ƒå¼€åˆè·³',
                    img: 'https://oaidalleapiprodscus.blob.core.windows.net/private/org-xxx/dalle-ai-jumping-jack.png',
                    desc: 'å¿«é€Ÿçƒ­èº«å…¨èº«è‚Œè‚‰ï¼ŒæŒç»­30ç§’ã€‚'
                },
                {
                    name: 'æ‰‹è…•è„šè¸ç»•ç¯',
                    img: 'https://oaidalleapiprodscus.blob.core.windows.net/private/org-xxx/dalle-ai-wrist-ankle-circle.png',
                    desc: 'æ¯ä¸ªå…³èŠ‚ç»•ç¯10åœˆã€‚'
                },
                {
                    name: 'è…˜ç»³è‚Œæ‹‰ä¼¸ï¼ˆç«™å§¿å‹è…¿ï¼‰',
                    img: 'https://oaidalleapiprodscus.blob.core.windows.net/private/org-xxx/dalle-ai-hamstring-stretch.png',
                    desc: 'ä¸€è„šæŠ¬è‡³é«˜å¤„ï¼ˆå¦‚æ¤…å­ï¼‰ï¼Œèº«ä½“å‰å€¾ä¿æŒ20ç§’ï¼Œæ¢è…¿ã€‚'
                },
                {
                    name: 'è‚©è†€äº¤å‰æ‹‰ä¼¸',
                    img: 'https://oaidalleapiprodscus.blob.core.windows.net/private/org-xxx/dalle-ai-shoulder-cross-stretch.png',
                    desc: 'åŒæ¸¸æ³³åŠ¨ä½œï¼Œè‚©è†€æ”¾æ¾æ‹‰ä¼¸ã€‚'
                }
            ],
            badminton: [
                {
                    name: 'æ‰‹è…•ç»•ç¯',
                    img: 'https://oaidalleapiprodscus.blob.core.windows.net/private/org-xxx/dalle-ai-wrist-circle.png',
                    desc: 'åŒæ‰‹æ‰‹è…•é¡ºæ—¶é’ˆ/é€†æ—¶é’ˆå„10åœˆã€‚'
                },
                {
                    name: 'ä¾§èº«æ‹‰ä¼¸',
                    img: 'https://oaidalleapiprodscus.blob.core.windows.net/private/org-xxx/dalle-ai-side-stretch.png',
                    desc: 'æ‰‹ä¸¾è¿‡å¤´ï¼Œå‘å·¦å³ä¸¤è¾¹æ‹‰ä¼¸ä¾§è…°å„10ç§’ã€‚'
                },
                {
                    name: 'å‰è‡‚ä¼¸å±•',
                    img: 'https://oaidalleapiprodscus.blob.core.windows.net/private/org-xxx/dalle-ai-forearm-stretch.png',
                    desc: 'ä¸€åªæ‰‹ä¼¸ç›´ï¼Œæ‰‹æŒæœä¸‹ï¼Œå¦ä¸€åªæ‰‹è½»è½»å°†æ‰‹æŒ‡å‘ä¸‹å‹ï¼Œä¿æŒ20ç§’ã€‚'
                },
                {
                    name: 'è‚©è†€åæ‹‰',
                    img: 'https://oaidalleapiprodscus.blob.core.windows.net/private/org-xxx/dalle-ai-shoulder-back-stretch.png',
                    desc: 'åŒæ‰‹äºèƒŒååæŒ‡äº¤å‰å‘ä¸‹æ‹‰ï¼Œæ‰“å¼€èƒ¸éƒ¨20ç§’ã€‚'
                }
            ],
            cycling: [
                {
                    name: 'é«‹éƒ¨å¼€åˆ',
                    img: 'https://oaidalleapiprodscus.blob.core.windows.net/private/org-xxx/dalle-ai-hip-open.png',
                    desc: 'åŒè…¿æŠ¬é«˜åšå¼€åˆåŠ¨ä½œï¼ˆç«™å§¿ï¼‰ï¼Œå„20æ¬¡ã€‚'
                },
                {
                    name: 'å°è…¿å«è„šè·³',
                    img: 'https://oaidalleapiprodscus.blob.core.windows.net/private/org-xxx/dalle-ai-calf-jump.png',
                    desc: 'è½»è·³æé«˜å°è…¿å¼¹æ€§ï¼Œ30ç§’ã€‚'
                },
                {
                    name: 'é«‚è…°è‚Œæ‹‰ä¼¸',
                    img: 'https://oaidalleapiprodscus.blob.core.windows.net/private/org-xxx/dalle-ai-iliopsoas-stretch.png',
                    desc: 'å¼“æ­¥å§¿åŠ¿ï¼Œåè…¿è†ç›–è´´åœ°ï¼Œå‰è…¿90åº¦ï¼Œé«‹éƒ¨å‰å‹ï¼Œä¿æŒ20ç§’ã€‚'
                },
                {
                    name: 'è…°èƒŒéƒ¨æ‰­è½¬æ‹‰ä¼¸',
                    img: 'https://oaidalleapiprodscus.blob.core.windows.net/private/org-xxx/dalle-ai-back-twist.png',
                    desc: 'åå§¿æ‰­è…°ï¼Œä¸€æ¡è…¿æ­åœ¨å¦ä¸€æ¡è…¿å¤–ä¾§ï¼Œæ‰‹è‚˜é¡¶è†æ—‹è½¬ä¸ŠåŠèº«ã€‚'
                }
            ],
            tennis: [
                {
                    name: 'è‚©è†€è½¬åœˆ+æ‰‹è…•ç»•ç¯',
                    img: 'https://oaidalleapiprodscus.blob.core.windows.net/private/org-xxx/dalle-ai-shoulder-wrist-circle.png',
                    desc: 'å„æ–¹å‘10æ¬¡ã€‚'
                },
                {
                    name: 'å·¦å³å¼“æ­¥å‹è…¿',
                    img: 'https://oaidalleapiprodscus.blob.core.windows.net/private/org-xxx/dalle-ai-side-lunge.png',
                    desc: 'åƒç›¸æ‰‘å¼å‹è…¿ï¼Œæ¯è¾¹10æ¬¡ã€‚'
                },
                {
                    name: 'å‰è‡‚ä¼¸å±•',
                    img: 'https://oaidalleapiprodscus.blob.core.windows.net/private/org-xxx/dalle-ai-forearm-stretch.png',
                    desc: 'ä¸ç¾½æ¯›çƒç±»ä¼¼ï¼Œæ‰‹æŒå‘ä¸‹å‹ã€‚'
                },
                {
                    name: 'æ–œæ–¹è‚Œæ‹‰ä¼¸',
                    img: 'https://oaidalleapiprodscus.blob.core.windows.net/private/org-xxx/dalle-ai-trapezius-stretch.png',
                    desc: 'åå§¿æˆ–ç«™å§¿ï¼Œä¸€åªæ‰‹æ‰¶å¤´ä¾§æ‹‰å‘è‚©è†€æ–¹å‘ï¼Œä¿æŒ20ç§’ï¼Œæ¢è¾¹ã€‚'
                }
            ]
        };

        // æ–°å¢ï¼šæ˜¾ç¤ºçƒ­èº«ä¸æ‹‰ä¼¸å¼¹çª—
        function showWarmupModal(type) {
            if (!currentUser) {
                requireLoginAlert();
                return;
            }
            const data = warmupData[type] || [];
            let html = '';
            data.forEach(item => {
                html += `<div style='margin-bottom:1.5rem;'>
                    <img src='${item.img}' alt='${item.name}' style='width:120px;height:120px;object-fit:contain;display:block;margin-bottom:0.5rem;'>
                    <div style='font-weight:bold;'>${item.name}</div>
                    <div style='color:#4b5563;font-size:0.95rem;'>${item.desc}</div>
                </div>`;
            });
            document.getElementById('warmupTitle').textContent = exerciseTypes[type].name + ' çƒ­èº«ä¸æ‹‰ä¼¸';
            document.getElementById('warmupContent').innerHTML = html || '<div style="color:#6b7280;">æš‚æ— æ¨èåŠ¨ä½œ</div>';
            document.getElementById('warmupModal').classList.add('active');
        }
        function hideWarmupModal() {
            document.getElementById('warmupModal').classList.remove('active');
        }

        // åœ¨è¿åŠ¨ç±»å‹æŒ‰é’®ä¸‹æ–¹æ·»åŠ "çƒ­èº«ä¸æ‹‰ä¼¸"æŒ‰é’®
        btnIds.forEach(id => {
            const btn = document.getElementById(id);
            if (btn) {
                // åˆ›å»ºçƒ­èº«æŒ‰é’®
                const warmBtn = document.createElement('button');
                warmBtn.textContent = 'çƒ­èº«ä¸æ‹‰ä¼¸';
                warmBtn.className = 'exercise-btn';
                warmBtn.style.background = '#fef9c3';
                warmBtn.style.marginTop = '8px';
                warmBtn.onclick = function(e) {
                    e.stopPropagation();
                    showWarmupModal(id.replace('btn-',''));
                };
                btn.parentNode.insertBefore(warmBtn, btn.nextSibling);
            }
        });
    </script>
</body>
</html> 